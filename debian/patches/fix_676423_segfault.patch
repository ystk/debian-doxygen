Description: fix for 676423: new segmentation faults in version 1.8.1-1
 removeEmptyLines() segfaults on empty string
Author: Thibaut Paumard <paumard@users.sourceforge.net>
Origin: vendor
Bug-Debian: http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=676423
Forwarded: no
Last-Update: 2012-07-05
---
This patch header follows DEP-3: http://dep.debian.net/deps/dep3/
Index: doxygen/src/htmlgen.cpp
===================================================================
--- doxygen.orig/src/htmlgen.cpp	2013-11-09 19:18:25.000000000 +0100
+++ doxygen/src/htmlgen.cpp	2013-11-09 19:18:25.000000000 +0100
@@ -1027,6 +1027,11 @@
 static QCString removeEmptyLines(const QCString &s)
 {
   BufStr out(s.length()+1);
+  if (s.length()==0)
+  {
+    out.addChar('\0');
+    return out.data();
+  }
   char *p=s.data();
   if (p)
   {
